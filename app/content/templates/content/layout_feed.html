{% load content_extras %}

{% split_posts_by_columns posts columns sort_direction as posts_by_columns %}
{% calc_max_posts_in_col posts columns as max_posts %}
{% posts_by_columns_flatten posts_by_columns as posts %}

{# ФИЛЬТР #}
<div class="d-flex mb-3 justify-content-end">
    <div class="feed-filter-form w-100 pb-3 border-bottom" style="display:none;">
        {{feed_filter_form}}
    </div>
    <div class="flex-shrink-1 ms-3 pb-3 ">
        <button class="filter-toggle btn btn-outline-secondary h-100" target=".feed-filter-form">
            <i class="bi bi-funnel"></i>
        </button>
    </div>
</div>

{% if feed_style == 'feed' %}
    {% include 'content/layout_feed_list.html' with show_introtext=True %}
{% elif feed_style == 'compact_feed' %}
    {% include 'content/layout_feed_list.html' %}
{% elif feed_style == 'blocks' %}
    {% include 'content/layout_feed_blocks.html' %}
{% elif feed_style == 'blocks_with_images_left' %}
    {% include 'content/layout_feed_blocks_with_images_left.html' %}
{% elif feed_style == 'blocks_with_images_top' %}
    {% include 'content/layout_feed_blocks_with_images_top.html' %}
{% elif feed_style == 'slider' %}
    {% comment %} {% posts_by_columns_flatten posts_by_columns as posts %} {% endcomment %}
    {% include 'content/layout_feed_slider.html' %}
{% endif %}