{% if menu_tree|length > 0 %}
<div class="container-fluid">
  
  <div class="row">
    <div class="col mx-auto">

        <ul class="vertical-menu">
            {% for level_1 in menu_tree %}
            <li class="
                {% if level_1.subitems != none %}
                list
                {% endif %}
            ">  
                {% if level_1.subitems != none %}
                <a class="nav-link" href="{{level_1.url}}">
                {% else %}
                <a class="nav-link" aria-current="page" href="{{level_1.url}}">
                {% endif %}
                    {% if level_1.item.icon %}
                    <i class="bi bi-{{level_1.item.icon}}"></i>
                    {% endif %}
                    {{level_1.item.title }} 
                </a>

                {% if level_1.subitems != none %}
                <ul>
                    {% for level_2 in level_1.subitems %}
                        {% if level_2.subitems != none %}
                        <li>
                            <a href="{{level_2.url}}">
                        {% else %}
                        <li>
                            <a href="{{ level_2.url }}">
                        {% endif %}
                                {% if level_2.item.icon %}
                                <i class="bi bi-{{level_2.item.icon}}"></i>
                                {% endif %}
                                {{ level_2.item.title }}
                            </a>

                            {% if level_2.subitems != none %}
                            <ul>
                                {% for level_3 in level_2.subitems %}
                                <li><a href="{{level_3.url}}">
                                    {% if level_3.item.icon %}
                                    <i class="bi bi-{{level_3.item.icon}}"></i>
                                    {% endif %}
                                    {{ level_3.item.title }}
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </li>
                    
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>

    </div>
  </div>
</div>
{% endif%}



<ul class="vertical-menu">
    <li class="list"><a href="#">List 1 </a> 
        <ul class="items">
            <li><a href="#"> Item 1-1</a></li>
            <li><a href="#"> Item 1-2</a></li>
            <li><a href="#"> Item 1-3</a></li>
        </ul>
    </li>
    <li class="list"><a href="#">List 2</a> 
        <ul class="items">
            <li> <a href="#" > Item 2-1 </a></li>
            <li> <a href="#" > Item 2-2 </a></li>
            <li> <a href="#" > Item 2-3 </a></li>
        </ul>
    </li>
    <li class="list"><a href="#">List 3</a> 
        <ul class="items">
            <li> <a href="#" > Item 3-1 </a></li>
            <li> <a href="#" > Item 3-2 </a></li>
            <li> <a href="#" > Item 3-2 </a></li>
        </ul>
    </li>
    <li class="list"><a href="#">List 4</a> 
        <ul class="items">
            <li> <a href="#" > Item 4-1 </a></li>
            <li> <a href="#" > Item 4-2 </a></li>
            <li class="list"><a href="#">List 4-1</a> 
                <ul  class="items">
                <li> <a href="#" > Item 4-1-1</a></li>
                <li> <a href="#" > Item 4-1-2</a></li>
                <li class="list"><a href="#">List 4-2</a> 
                    <ul  class="items">
                        <li> <a href="#" > Item 4-2-1</a></li>
                        <li> <a href="#" > Item 4-2-2</a></li>
                    </ul>
                </li>
                </ul>
            </li>
        </ul>
    </li>
</ul>



<script>
const list = document.querySelectorAll('.vertical-menu .list');

function accordion(e){
    e.stopPropagation(); 
    if(this.classList.contains('active')){
        this.classList.remove('active');
    }
    else if(this.parentElement.parentElement.classList.contains('active')){
        this.classList.add('active');
    }
    else{
        for(i=0; i < list.length; i++){
          list[i].classList.remove('active');
        }
            this.classList.add('active');
        }
}
for(i = 0; i < list.length; i++ ){
    list[i].addEventListener('click', accordion);
}

</script>